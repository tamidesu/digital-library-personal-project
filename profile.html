<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Profile — Digital Library</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/profile.css" />
</head>
<body>
  <div data-include="partials/header.html"></div>

  <main class="container profile-page">
    <section class="profile-hero glass">
      <div class="profile-hero__left">
        <div class="profile-avatar" id="profileAvatar">U</div>
        <div class="profile-hero__meta">
          <h1 class="profile-title">Your Profile</h1>
          <p class="profile-subtitle">
            Manage your personal information and account settings.
          </p>
          <div class="profile-badges">
            <span class="p-badge" id="badgeRole">Role: user</span>
            <span class="p-badge p-badge--dim" id="badgeStatus">Status: active</span>
          </div>
        </div>
      </div>

      <div class="profile-hero__right">
        <div class="profile-stat">
          <div class="label">Member since</div>
          <div class="value" id="statCreatedAt">—</div>
        </div>
        <div class="profile-stat">
          <div class="label">Last updated</div>
          <div class="value" id="statUpdatedAt">—</div>
        </div>
      </div>
    </section>

    <section class="profile-grid mt-4">
      <!-- Left: editable form -->
      <div class="glass profile-card">
        <div class="card-head">
          <h2 class="card-title">Account Details</h2>
          <p class="card-sub">Update your name and email. Password change is optional.</p>
        </div>

        <form id="profileForm" class="profile-form" novalidate>
          <div class="row g-3">
            <div class="col-12">
              <label class="form-label">Full name</label>
              <input class="form-control" name="name" placeholder="Your name">
              <div class="field-error" data-error="name"></div>
            </div>

            <div class="col-12">
              <label class="form-label">Email</label>
              <input class="form-control" name="email" placeholder="you@example.com" inputmode="email">
              <div class="field-error" data-error="email"></div>
            </div>

            <div class="col-12">
              <label class="form-label">New password <span class="dim">(optional)</span></label>
              <input class="form-control" name="password" type="password" placeholder="••••••••">
              <div class="field-error" data-error="password"></div>
            </div>

            <div class="col-12">
              <label class="form-label">Confirm new password <span class="dim">(optional)</span></label>
              <input class="form-control" name="confirm" type="password" placeholder="••••••••">
              <div class="field-error" data-error="confirm"></div>
            </div>
          </div>

          <div class="form-actions mt-4 d-flex gap-3 align-items-center">
            <a href="products.html" class="btn-back">← Back to Products</a>
            <button type="submit" class="btn-buy ms-auto" id="btnSaveProfile">
              Save Changes
            </button>
          </div>

          <div class="save-state" id="saveState" aria-live="polite"></div>
        </form>
      </div>

      <!-- Right: read-only summary -->
      <aside class="glass profile-card profile-card--summary">
        <div class="card-head">
          <h2 class="card-title">Profile Preview</h2>
          <p class="card-sub">This is how your account info is stored.</p>
        </div>

        <div class="summary-box">
          <div class="row-item">
            <span class="k">Name</span>
            <span class="v" id="previewName">—</span>
          </div>
          <div class="row-item">
            <span class="k">Email</span>
            <span class="v" id="previewEmail">—</span>
          </div>
          <div class="row-item">
            <span class="k">Role</span>
            <span class="v" id="previewRole">—</span>
          </div>
          <div class="row-item">
            <span class="k">Status</span>
            <span class="v" id="previewStatus">—</span>
          </div>
        </div>

        <div class="note-box mt-3">
          <div class="note-title">Security note</div>
          <div class="note-text">
            Your password is stored locally for this project. In real production systems,
            passwords must be hashed and never stored in plain text.
          </div>
        </div>
      </aside>
    </section>
  </main>

  <div data-include="partials/floating-cart.html"></div>
  <div data-include="partials/footer.html"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/includes.js"></script>
  <script src="js/db.js"></script>
  <script src="js/books-data.js"></script>
  <script src="js/auth-core.js"></script>
  <script src="js/auth-ui.js"></script>
  <script src="js/profile-page.js"></script>
  <script src="js/theme.js"></script>
</body>
</html>
